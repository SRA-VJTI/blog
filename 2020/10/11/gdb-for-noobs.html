<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>GDB For Noobs | sra-vjti</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="GDB For Noobs" />
<meta name="author" content="sra-vjti" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Introduction to debugging C/C++ programs using the GNU Debugger" />
<meta property="og:description" content="Introduction to debugging C/C++ programs using the GNU Debugger" />
<link rel="canonical" href="blog.sravjti.in/2020/10/11/gdb-for-noobs.html" />
<meta property="og:url" content="blog.sravjti.in/2020/10/11/gdb-for-noobs.html" />
<meta property="og:site_name" content="sra-vjti" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-10-11T00:00:00+00:00" />
<script type="application/ld+json">
{"description":"Introduction to debugging C/C++ programs using the GNU Debugger","url":"blog.sravjti.in/2020/10/11/gdb-for-noobs.html","headline":"GDB For Noobs","dateModified":"2020-10-11T00:00:00+00:00","datePublished":"2020-10-11T00:00:00+00:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"blog.sravjti.in/2020/10/11/gdb-for-noobs.html"},"author":{"@type":"Person","name":"sra-vjti"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css">
  <link rel="icon" type="image/png" href="/assets/favicon.png" /><link type="application/atom+xml" rel="alternate" href="blog.sravjti.in/feed.xml" title="sra-vjti" /></head>
<body><div class="site-header">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/">sra-vjti<b class="command_prompt"></b><b class="blinking_cursor">_</b></a>
    <span class="social_links">
        <a class="color-pink-hover" href="https://www.instagram.com/sra_vjti/"><i class="fab fa-instagram"></i></a><a class="color-blue-hover" href="https://www.linkedin.com/company/society-of-robotics-and-automation-vjti/"><i class="fab fa-linkedin"></i></a><a class="color-cyan-hover" href="https://www.facebook.com/pg/sra.vjti/posts/"><i class="fab fa-facebook"></i></a><a class="color-red-hover" href="https://www.youtube.com/channel/UC-g67CbV2Iu30n7TvipRiCA/featured"><i class="fab fa-youtube"></i></a><a class="color-yellow-hover" href="https://github.com/sra-vjti"><i class="fab fa-github-square"></i></a>
    </span>
  </div>
</div>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        
  <div class="author-box">
    
    
        <img src="
            https://github.com/sra-vjti.png
        " class="author-avatar" alt="Avatar" />
    
The Society of Robotics and Automation is a society for VJTI students. As the name suggests, we deal with Robotics, Machine Vision and Automation

</div>


<div class="post">
  <h1 class="post-title">GDB For Noobs</h1>
  
  <div class="post-tags">
      
      <a class="tag" href="/tag/gdb/">gdb</a>
      
  </div>
  
  <div class="post-date">Published on 11 Oct 2020</div>
  
  <div class="post-description">Introduction to debugging C/C++ programs using the GNU Debugger</div>
  
  <p>– <a href="https://github.com/DhruvaG2000">Dhruva Gole</a></p>

<h2 id="why-use-a-debugger">Why use a debugger?</h2>

<p>Most of us tend to have bugs in our code. We could use printing commands to test our code, or we could use a debugger. Many times our code might seem to work correctly, because we didn’t test it under enough scenarios. Other times we know there’s a bug, but by just reading the code we don’t notice it is there. Thus, we should develop a habit of launching a debugger when we get into trouble.</p>

<h2 id="walkthrough">Walkthrough</h2>

<ul>
  <li>
    <p>for compiling your code to make it suitable for debugging using gdb:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  g++ <span class="nt">-g</span> <span class="s2">"buggy_factorial.cpp"</span> 
</code></pre></div>    </div>
  </li>
  <li>
    <p>launching the gdb shell:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  gdb a.out
</code></pre></div>    </div>
  </li>
  <li>
    <p>basic commands we will be needing:</p>

    <ul>
      <li><code class="highlighter-rouge">(gdb) run</code> : runs the program.</li>
      <li><code class="highlighter-rouge">(gdb) break file1.c:6</code> : Breakpoints can be used to stop the program run in the middle, at a designated point (we will see how its useful in the following example).</li>
      <li><code class="highlighter-rouge">(gdb) break myfunc</code>: creates breakpoint at <code class="highlighter-rouge">myfunc</code> <strong>remember to use myfunc without the ()</strong></li>
      <li><code class="highlighter-rouge">(gdb) step</code> or <code class="highlighter-rouge">(gdb) s</code> : execute just the next line of code.</li>
      <li><code class="highlighter-rouge">(gdb) print (gdb)</code> or <code class="highlighter-rouge">(gdb) p (gdb)</code> :  prints the value of the variable.</li>
      <li><code class="highlighter-rouge">(gdb) watch myvar</code>: whenever myvar’s value is modified, the program will interrupt and print out the old and new values. 
  trivial one’s below…</li>
      <li><code class="highlighter-rouge">finish</code> : runs until the current function is finished.</li>
      <li><code class="highlighter-rouge">delete</code> : deletes a specified breakpoint.</li>
      <li><code class="highlighter-rouge">info breakpoints</code> : shows information about all declared breakpoints.</li>
    </ul>
  </li>
  <li>
    <p>explanation with example:</p>
    <ul>
      <li>
        <p>First, let’s just run the code.. 
  command:</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  run
</code></pre></div>        </div>
        <p>output:</p>
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Starting program: /home/dhruva/Documents/studies/maths/gdb-for-noobs/a.out 
  enter any number: 
  4
  The factorial of 4 is 1[Inferior 1 (process 14193) exited normally]
</code></pre></div>        </div>

        <p>oops! Clearly the answer is wrong!!
  Now, as a very inexperienced programmer, one would try to print at every iteration to see where the program might have gone wrong resulting in a very ugly looking code and also adding the unnecessary headache of having to track the line number of each print statement one had used for debugging their codes. 
  Now, let’s see how gdb simplifies things for us…</p>
      </li>
      <li>
        <p>creating breakpoints: 
  Since my factorial function is most probably messing up, I will add the breakpoint to it. 
  command:</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  break factorial
</code></pre></div>        </div>

        <p>output:</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Breakpoint 1 at 0x555555554993: file buggy_factorial.cpp, line 5.
</code></pre></div>        </div>

        <p>now lets run it again… using <code class="highlighter-rouge">run</code> 
  output:</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Starting program: /home/dhruva/Documents/studies/maths/gdb-for-noobs/a.out 
  enter any number: 
  4

  Breakpoint 1, factorial (n=4) at buggy_factorial.cpp:5
  5	  double res=1;
</code></pre></div>        </div>

        <p>as we can see, the program stopped just as the function was called. Now, instead of needing to manually add <code class="highlighter-rouge">print()</code> statements I will see why my code is buggy by watching the variables in my console itself!</p>
      </li>
      <li>
        <p>watching the variable
  Since it is likely that some variable is not working properly, let’s start by watching the <code class="highlighter-rouge">res</code> variable. 
  command: 
  <code class="highlighter-rouge">watch res</code>
  now the gdb console works in such a way that hitting enter will automatically take you to the next step where you expect to see some change in your variable as the while loop modifies it in each iteration…
  hmm… something strange, the res variable isn’t updating! 
  Well, so now that I observe that <code class="highlighter-rouge">res</code> isn’t updating, the only reason I think is it must not be entering the while loop for some reason!</p>

        <p>OK! So now I go back ad make changes in my while loop condition to
  <code class="highlighter-rouge">while(n&gt;=1)</code></p>
      </li>
      <li>
        <p>Let’s see if the issue is fixed!
  Press <code class="highlighter-rouge">q</code> and then <code class="highlighter-rouge">y</code> to exit the gdb, and again compile your new program:</p>
        <ul>
          <li><code class="highlighter-rouge">g++ -g factorial.cpp -o fact</code></li>
          <li><code class="highlighter-rouge">gdb fact</code></li>
          <li><code class="highlighter-rouge">run</code></li>
          <li>
            <p>output:</p>

            <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Starting program: /home/dhruva/Documents/studies/maths/gdb-for-noobs/fact 
  enter any number: 
  4
  The factorial of 4 is 24[Inferior 1 (process 15039) exited normally]
</code></pre></div>            </div>
            <p>Thus using GDB we learned to debug a very basic code in c++. You can also try the other commands listed on top as per your own convenience and requirements.</p>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="sources">sources:</h2>
<ul>
  <li><a href="https://www.cs.umd.edu/~srhuang/teaching/cmsc212/gdb-tutorial-handout.pdf">gdb-tutorial-handout</a></li>
  <li><a href="http://www.math.bas.bg/~nkirov/2005/netb151/debugging-with-gdb.html">debugging-with-gdb</a></li>
</ul>

</div>





<div class="related">
  <h2>related posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2021/06/27/adversarial-attacks.html">
            Adversarial Attacks
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2021/06/26/using-python-api-in-coppeliasim.html">
            Using PythonAPI in CoppeliaSim
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2020/12/11/singularity-ros-melodic.html">
            Guide to using singularity to run ROS Melodic
          </a>
        </h3>
      </li>
    
  </ul>
</div>




  
  <h2>all tags</h2>
  <div class="tag-cloud"><a href="/tag/api/" class="set-1">API</a> <a href="/tag/python/" class="set-1">Python</a> <a href="/tag/assembly/" class="set-1">assembly</a> <a href="/tag/compilers/" class="set-3">compilers</a> <a href="/tag/computer_vision/" class="set-1">computer_vision</a> <a href="/tag/electrical/" class="set-2">electrical</a> <a href="/tag/electronics/" class="set-5">electronics</a> <a href="/tag/embedded-system/" class="set-1">embedded-system</a> <a href="/tag/fpga/" class="set-1">fpga</a> <a href="/tag/gdb/" class="set-1">gdb</a> <a href="/tag/image_processing/" class="set-1">image_processing</a> <a href="/tag/interpreters/" class="set-2">interpreters</a> <a href="/tag/jekyll/" class="set-1">jekyll</a> <a href="/tag/memory/" class="set-1">memory</a> <a href="/tag/mobile-technology/" class="set-1">mobile-technology</a> <a href="/tag/mosfet/" class="set-1">mosfet</a> <a href="/tag/rectifiers/" class="set-1">rectifiers</a> <a href="/tag/relays/" class="set-1">relays</a> <a href="/tag/ros_singularity/" class="set-1">ros_singularity</a> <a href="/tag/semiconductors/" class="set-1">semiconductors</a> <a href="/tag/simulation/" class="set-1">simulation</a> <a href="/tag/transistors/" class="set-1">transistors</a></div>
  



      </div>
    </main><footer class="site-footer">
  <div class="wrapper">
    <div class="credits"><a href="https://github.com/bitbrain/jekyll-dash">dash</a> theme for Jekyll by <a href="https://github.com/bitbrain">bitbrain</a> made with <i class="fas fa-heart"></i><div class="toggleWrapper">
    <input type="checkbox" class="dn" id="theme-toggle" onclick="modeSwitcher()" checked />
    <label for="theme-toggle" class="toggle">
    <span class="toggle__handler">
      <span class="crater crater--1"></span>
      <span class="crater crater--2"></span>
      <span class="crater crater--3"></span>
    </span>
        <span class="star star--1"></span>
        <span class="star star--2"></span>
        <span class="star star--3"></span>
        <span class="star star--4"></span>
        <span class="star star--5"></span>
        <span class="star star--6"></span>
    </label>
</div>
<script type="text/javascript">
const theme = localStorage.getItem('theme');

if (theme === "light") {
    document.documentElement.setAttribute('data-theme', 'light');
} else {
    document.documentElement.setAttribute('data-theme', 'dark');
}
const userPrefers = getComputedStyle(document.documentElement).getPropertyValue('content');

function activateDarkTheme() {
    document.getElementById('theme-toggle').checked = true;
    document.documentElement.setAttribute('data-theme', 'dark');
    document.documentElement.classList.add('theme--dark');
    document.documentElement.classList.remove('theme--light');
	document.getElementById("theme-toggle").className = 'light';
	window.localStorage.setItem('theme', 'dark');
}

function activateLightTheme() {
    document.getElementById('theme-toggle').checked = false;
    document.documentElement.setAttribute('data-theme', 'light');
    document.documentElement.classList.add('theme--light');
    document.documentElement.classList.remove('theme--dark');
	document.getElementById("theme-toggle").className = 'dark';
	window.localStorage.setItem('theme', 'light');
}

if (theme === "dark") {
    activateDarkTheme();
} else if (theme === "light") {
    activateLightTheme();
} else if  (userPrefers === "light") {
    activateDarkTheme();
} else {
    activateDarkTheme();
}

function modeSwitcher() {
	let currentMode = document.documentElement.getAttribute('data-theme');
	if (currentMode === "dark") {
	    activateLightTheme();
	} else {
	    activateDarkTheme();
	}
}
</script></div>
  </div>
</footer>


<script>
      window.FontAwesomeConfig = {
        searchPseudoElements: true
      }
    </script>
  </body>

</html>
