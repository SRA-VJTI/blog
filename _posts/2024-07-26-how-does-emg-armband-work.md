---
layout: post
title: EMG armband, The conclusion
tags: ML Systems IoT PCB Designing ML Embedded
description: Developing a EMG system that can read human hand motioning.
---

## Mentees  :
- [Shaunak Datar](https://github.com/ShaunakKDatar)
- [Piyush Patle](https://github.com/PiyushPatle26)
- [Atharva Kshirsagar](https://github.com/vovw)

---
# What is our project ?
We read Electromyography(EMG) data using sensors, amplify it, filter it, ADC convert it and performs a frequency analysis (FFT) on it. Using the analised data we train a ml model than can understand what hand moment was done to get those readings.

![fft](/assets/posts/emg-armband/hardware_flow.png)

# What work has been done ?
- First we *tried* to apporach this problem from the first principals. We implemented the **biopotential signal-acquisition board** from scratch. But had some issues with it.
- then we pivoted temp to using upsidedown labs [exg pill](https://github.com/upsidedownlabs/BioAmp-EXG-Pill) and it works.
(add images of the reading)


### Signal processing:
- The raw signal goes through a bandpass filter to focus on frequencies between 75 and 150 Hz.
- This filtering helps remove noise and focus on the most relevant part of the EMG signal.

### ADC (Analog-to-Digital Converter)
- Converts the continuous analog signal from the sensor into digital values the microcontroller can process.
- We have used the entire 12 bit ADC provided in the esp32.
- We later bound the values and mapped them to reduce the 0-4095 values to 0-1000 readings.

### Bandpass filter: 
- A filter that allows signals between two specific frequencies to pass through while blocking others.
- A Bandpass filter which filters the signal and returns a 72.5-725Hz signal is included in the Bio-amp EXG Pill.
- Adding to this we have implemented a Band-Pass Butterworth IIR digital filter which is generated using filter_gen.py

### Frequency analysis:
- The code uses the Fast Fourier Transform (FFT) to convert the time-domain signal into frequency components.
- This helps identify which frequencies are most prominent in the EMG signal.
- The Fast Fourier Transform algorithm we used is the [Cooley-Tukey Algorithm](https://en.wikipedia.org/wiki/Cooley%E2%80%93Tukey_FFT_algorithm).

![fft](/assets/posts/emg-armband/fft.png)

# Storing the Signal
Now we have to store the readings as data to train our Machine Learning Model.
To start with we decided to label 2 events: Finger Moving and Palm closing.
We output the data in frequency bins generated by the FFT on the serial port and store the data in a .txt file. We wrote a python script which maps this data from .txt to a csv format which makes reading it, using pandas in our Model script, easier.

![flow](/assets/posts/emg-armband/flow.png)

### github repo - [emgband](https://github.com/vovw/emgband)


### This project has been sponsored by [Upside Down Labs](https://upsidedownlabs.tech/)
![flow](/assets/posts/emg-armband/upside_down.webp)

